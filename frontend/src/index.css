/* ─── Reset & base ─────────────────────────────────────────────────── */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

:root {
  --bg:          #05060f;
  --bg-2:        rgba(255,255,255,.04);
  --bg-3:        rgba(255,255,255,.07);
  --border:      rgba(255,255,255,.1);
  --border-glow: rgba(139,92,246,.4);
  --text:        #e8e8f0;
  --text-muted:  #7878a0;
  --accent:      #8b5cf6;
  --accent-2:    #ec4899;
  --accent-hover:#a78bfa;
  --cyan:        #22d3ee;
  --success:     #4ade80;
  --error:       #f87171;
  --gold:        #fbbf24;
  --radius:      10px;
  --radius-lg:   16px;
  --shadow:      0 8px 32px rgba(0,0,0,.6);
  --glow-purple: 0 0 24px rgba(139,92,246,.3);
  --glow-pink:   0 0 24px rgba(236,72,153,.3);
  --glow-cyan:   0 0 24px rgba(34,211,238,.3);
  font-size: 15px;
}

html, body {
  height: 100%;
  background: var(--bg);
  color: var(--text);
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif;
  line-height: 1.5;
  -webkit-font-smoothing: antialiased;
}
#root {
  height: 100%;
  position: relative;
  z-index: 1;
}

/* Fond galaxy */
body::before {
  content: "";
  position: fixed; inset: 0; z-index: 0; pointer-events: none;
  background:
    radial-gradient(ellipse 70% 55% at 15% 5%,  rgba(109,40,217,.22) 0%, transparent 55%),
    radial-gradient(ellipse 55% 45% at 85% 85%,  rgba(190,24,93,.16)  0%, transparent 50%),
    radial-gradient(ellipse 45% 55% at 65% 25%,  rgba(6,182,212,.10)  0%, transparent 48%);
}

/* Étoiles */
body::after {
  content: "";
  position: fixed; inset: 0; z-index: 0; pointer-events: none;
  background-image:
    radial-gradient(1px 1px at  8% 12%, rgba(255,255,255,.75) 0%, transparent 100%),
    radial-gradient(1px 1px at 18% 55%, rgba(255,255,255,.50) 0%, transparent 100%),
    radial-gradient(1px 1px at 27%  8%, rgba(255,255,255,.65) 0%, transparent 100%),
    radial-gradient(1px 1px at 36% 78%, rgba(255,255,255,.45) 0%, transparent 100%),
    radial-gradient(1px 1px at 44% 32%, rgba(255,255,255,.60) 0%, transparent 100%),
    radial-gradient(1px 1px at 53% 67%, rgba(255,255,255,.40) 0%, transparent 100%),
    radial-gradient(1px 1px at 62% 18%, rgba(255,255,255,.70) 0%, transparent 100%),
    radial-gradient(1px 1px at 71% 88%, rgba(255,255,255,.50) 0%, transparent 100%),
    radial-gradient(1px 1px at 79% 44%, rgba(255,255,255,.65) 0%, transparent 100%),
    radial-gradient(1px 1px at 88% 72%, rgba(255,255,255,.55) 0%, transparent 100%),
    radial-gradient(1px 1px at 94% 28%, rgba(255,255,255,.60) 0%, transparent 100%),
    radial-gradient(1px 1px at  3% 91%, rgba(255,255,255,.45) 0%, transparent 100%),
    radial-gradient(1px 1px at 13% 37%, rgba(255,255,255,.55) 0%, transparent 100%),
    radial-gradient(1px 1px at 58% 95%, rgba(255,255,255,.40) 0%, transparent 100%),
    radial-gradient(1px 1px at 84% 10%, rgba(255,255,255,.70) 0%, transparent 100%),
    radial-gradient(1.5px 1.5px at 22% 22%, rgba(196,181,253,.80) 0%, transparent 100%),
    radial-gradient(1.5px 1.5px at 47% 48%, rgba(147,197,253,.70) 0%, transparent 100%),
    radial-gradient(1.5px 1.5px at 68% 62%, rgba(249,168,212,.65) 0%, transparent 100%),
    radial-gradient(1.5px 1.5px at 91% 38%, rgba(167,243,208,.60) 0%, transparent 100%),
    radial-gradient(2px   2px   at 33% 92%, rgba(196,181,253,.50) 0%, transparent 100%),
    radial-gradient(2px   2px   at 76% 15%, rgba(147,197,253,.55) 0%, transparent 100%),
    radial-gradient(2px 2px at 15% 20%, rgba(255,255,255,.90) 0%, transparent 100%),
    radial-gradient(2px 2px at 55% 10%, rgba(255,255,255,.85) 0%, transparent 100%),
    radial-gradient(2px 2px at 82% 58%, rgba(255,255,255,.80) 0%, transparent 100%),
    radial-gradient(2px 2px at 40% 82%, rgba(255,255,255,.75) 0%, transparent 100%);
}

/* Animation scintillement sur quelques étoiles */
@keyframes twinkle {
  0%, 100% { opacity: 1; }
  50%       { opacity: .3; }
}
.twinkle-1 {
  position: fixed; width: 2px; height: 2px; border-radius: 50%;
  background: rgba(255,255,255,.9); pointer-events: none; z-index: 0;
  top: 20%; left: 15%; animation: twinkle 3.2s ease-in-out infinite;
}
.twinkle-2 {
  position: fixed; width: 2px; height: 2px; border-radius: 50%;
  background: rgba(196,181,253,.9); pointer-events: none; z-index: 0;
  top: 10%; left: 55%; animation: twinkle 4.5s ease-in-out infinite .8s;
}
.twinkle-3 {
  position: fixed; width: 1.5px; height: 1.5px; border-radius: 50%;
  background: rgba(255,255,255,.8); pointer-events: none; z-index: 0;
  top: 58%; left: 82%; animation: twinkle 2.8s ease-in-out infinite 1.5s;
}

#root { position: relative; z-index: 1; }

a { color: inherit; text-decoration: none; }
button { cursor: pointer; font: inherit; border: none; background: none; }
input { font: inherit; }

::-webkit-scrollbar { width: 5px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: rgba(139,92,246,.4); border-radius: 3px; }

.icon-muted   { color: var(--text-muted); }
.icon-success { color: var(--success); }
.icon-gold    { color: var(--gold); }

.spin { animation: spin 1s linear infinite; color: var(--text-muted); }
@keyframes spin { to { transform: rotate(360deg); } }

.skeleton {
  background: linear-gradient(90deg, rgba(255,255,255,.04) 25%, rgba(255,255,255,.08) 50%, rgba(255,255,255,.04) 75%);
  background-size: 200% 100%;
  animation: shimmer 1.6s infinite;
  border-radius: var(--radius);
}
@keyframes shimmer { to { background-position: -200% 0; } }

/* ─── Buttons ───────────────────────────────────────────────────────── */
.btn {
  display: inline-flex; align-items: center; gap: 6px;
  padding: 8px 18px; border-radius: var(--radius);
  font-size: .875rem; font-weight: 500;
  transition: all .2s;
}
.btn:disabled { opacity: .35; cursor: not-allowed; }
.btn-primary {
  background: linear-gradient(135deg, var(--accent), var(--accent-2));
  color: #fff; border: none;
  box-shadow: 0 0 16px rgba(139,92,246,.4);
}
.btn-primary:hover:not(:disabled) {
  box-shadow: 0 0 24px rgba(139,92,246,.6), 0 0 48px rgba(236,72,153,.2);
  transform: translateY(-1px);
}
.btn-icon {
  display: inline-flex; align-items: center; justify-content: center;
  width: 34px; height: 34px; border-radius: var(--radius);
  color: var(--text-muted); transition: all .15s;
}
.btn-icon:hover { background: var(--bg-3); color: var(--text); }

/* ─── Glassmorphism card base ───────────────────────────────────────── */
.glass {
  background: var(--bg-2);
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
  border: 1px solid var(--border);
}

/* ─── Layout ────────────────────────────────────────────────────────── */
.app-layout { display: flex; flex-direction: column; min-height: 100vh; }
.app-main {
  flex: 1; max-width: 920px; width: 100%;
  margin: 0 auto; padding: 36px 20px 72px;
}

/* ─── Navbar ────────────────────────────────────────────────────────── */
.navbar {
  display: flex; align-items: center; gap: 24px;
  padding: 0 28px; height: 58px;
  background: rgba(5,6,15,.7);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border-bottom: 1px solid var(--border);
  position: sticky; top: 0; z-index: 10;
}
.navbar-brand {
  display: flex; align-items: center; gap: 9px;
  font-weight: 700; font-size: 1rem; white-space: nowrap;
  background: linear-gradient(135deg, #a78bfa, #ec4899);
  -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent;
}
.brand-icon { color: var(--gold); filter: drop-shadow(0 0 6px rgba(251,191,36,.5)); }
.navbar-links { display: flex; gap: 2px; flex: 1; }
.nav-link {
  display: inline-flex; align-items: center; gap: 6px;
  padding: 6px 14px; border-radius: var(--radius);
  font-size: .875rem; color: var(--text-muted);
  transition: all .18s; position: relative;
}
.nav-link:hover { color: var(--text); background: var(--bg-3); }
.nav-link--active {
  color: var(--text);
  background: rgba(139,92,246,.15);
  border: 1px solid rgba(139,92,246,.25);
}
.navbar-user { display: flex; align-items: center; gap: 10px; margin-left: auto; }
.user-info { display: flex; align-items: center; gap: 9px; }
.user-avatar {
  border-radius: 50%;
  border: 2px solid rgba(139,92,246,.5);
  box-shadow: 0 0 10px rgba(139,92,246,.35);
  object-fit: cover;
}
.user-pseudo { font-size: .875rem; font-weight: 500; color: var(--text); }

/* ─── Page header ───────────────────────────────────────────────────── */
.page { position: relative; }
.page-header {
  display: flex; align-items: center; justify-content: space-between;
  margin-bottom: 28px;
}
.page-header h1 {
  font-size: 1.5rem; font-weight: 800; letter-spacing: -.02em;
  background: linear-gradient(135deg, #e8e8f0 30%, #a78bfa);
  -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent;
}
.refresh-hint { font-size: .75rem; color: var(--text-muted); }
.stats-row { display: flex; gap: 8px; }
.stat-badge {
  display: inline-flex; align-items: center; gap: 5px;
  padding: 5px 12px; border-radius: 20px;
  background: rgba(139,92,246,.1);
  border: 1px solid rgba(139,92,246,.2);
  font-size: .78rem; color: #a78bfa;
}

/* ─── Login ─────────────────────────────────────────────────────────── */
.login-page {
  min-height: 100vh; display: flex;
  align-items: center; justify-content: center; padding: 20px;
  position: relative;
}
.login-card {
  background: rgba(255,255,255,.03);
  backdrop-filter: blur(24px);
  -webkit-backdrop-filter: blur(24px);
  border: 1px solid rgba(139,92,246,.25);
  border-radius: 20px; padding: 52px 44px;
  max-width: 400px; width: 100%; text-align: center;
  box-shadow: 0 0 60px rgba(139,92,246,.15), 0 8px 40px rgba(0,0,0,.5);
  position: relative; overflow: hidden;
}
.login-card::before {
  content: "";
  position: absolute; top: -60px; left: 50%; transform: translateX(-50%);
  width: 200px; height: 200px; border-radius: 50%;
  background: radial-gradient(circle, rgba(139,92,246,.25) 0%, transparent 70%);
  pointer-events: none;
}
.login-logo {
  display: inline-flex; align-items: center; justify-content: center;
  width: 76px; height: 76px;
  background: linear-gradient(135deg, rgba(139,92,246,.2), rgba(236,72,153,.2));
  border: 1px solid rgba(139,92,246,.3);
  border-radius: 50%; margin-bottom: 22px;
  box-shadow: 0 0 24px rgba(139,92,246,.25);
}
.login-card h1 {
  font-size: 1.4rem; font-weight: 800; margin-bottom: 10px;
  background: linear-gradient(135deg, #e8e8f0, #a78bfa);
  -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent;
}
.login-card p { color: var(--text-muted); font-size: .9rem; margin-bottom: 30px; line-height: 1.65; }
.btn-login { width: 100%; justify-content: center; padding: 11px 20px; font-size: .95rem; }

/* ─── Callback ──────────────────────────────────────────────────────── */
.callback-page {
  min-height: 100vh; display: flex; flex-direction: column;
  align-items: center; justify-content: center; gap: 16px; color: var(--text-muted);
}

/* ─── Submit form ───────────────────────────────────────────────────── */
.input-icon { color: var(--text-muted); flex-shrink: 0; }
.flag-input {
  flex: 1; background: none; border: none; outline: none;
  color: var(--text); font-size: .9rem; padding: 4px 0;
}
.flag-input::placeholder { color: var(--text-muted); }
.flag-input:disabled { opacity: .4; }
.feedback {
  display: flex; align-items: center; gap: 7px;
  margin-top: 10px; padding: 9px 13px; border-radius: var(--radius); font-size: .84rem;
}
.feedback-success { background: rgba(74,222,128,.1); border: 1px solid rgba(74,222,128,.2); color: var(--success); }
.feedback-error   { background: rgba(248,113,113,.1); border: 1px solid rgba(248,113,113,.2); color: var(--error); }

/* ─── Flags grid ────────────────────────────────────────────────────── */
.flags-grid, .loading-grid {
  display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 16px;
}
.flag-card {
  background: rgba(255,255,255,.03);
  backdrop-filter: blur(12px);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg); padding: 20px;
  display: flex; flex-direction: column; gap: 10px;
  min-height: 160px; position: relative; overflow: hidden;
}
.flag-card::before {
  content: ""; position: absolute; inset: 0; border-radius: var(--radius-lg);
  background: linear-gradient(135deg, rgba(139,92,246,.05) 0%, transparent 60%);
  pointer-events: none;
}
.flag-card--btn {
  text-align: left; width: 100%; cursor: pointer;
  transition: border-color .25s, transform .2s, box-shadow .25s;
}
.flag-card--btn:hover {
  border-color: rgba(139,92,246,.4);
  transform: translateY(-3px);
  box-shadow: 0 8px 32px rgba(139,92,246,.15);
}
.flag-card--validated {
  border-color: rgba(74,222,128,.25);
  background: rgba(74,222,128,.03);
}
.flag-card--validated::before {
  background: linear-gradient(135deg, rgba(74,222,128,.07) 0%, transparent 60%);
}
.flag-card--validated:hover { border-color: rgba(74,222,128,.5); box-shadow: 0 8px 32px rgba(74,222,128,.12); }
.flag-card-header { display: flex; align-items: center; justify-content: space-between; }
.flag-icon { display: flex; }
.flag-points {
  display: inline-flex; align-items: center; gap: 4px;
  font-size: .74rem; font-weight: 700; color: var(--gold);
  text-shadow: 0 0 10px rgba(251,191,36,.4);
}
.flag-name { font-size: .95rem; font-weight: 700; color: var(--text); }
.flag-description { font-size: .82rem; color: var(--text-muted); line-height: 1.55; flex: 1; }
.flag-card-footer { display: flex; align-items: center; justify-content: space-between; margin-top: 4px; }
.flag-date { font-size: .72rem; color: var(--success); }
.flag-status-hint { display: inline-flex; align-items: center; gap: 4px; font-size: .72rem; color: var(--text-muted); }

/* ─── Flag modal ────────────────────────────────────────────────────── */
.modal-backdrop {
  position: fixed; inset: 0; z-index: 100;
  background: rgba(0,0,0,.55); backdrop-filter: blur(4px);
  display: flex; align-items: center; justify-content: center; padding: 20px;
}
.modal {
  background: rgba(8,6,20,.88);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255,255,255,.1);
  border-radius: 18px;
  box-shadow: 0 2px 40px rgba(0,0,0,.6);
  width: 100%; max-width: 520px;
  animation: modal-in .18s cubic-bezier(.34,1.56,.64,1);
}
@keyframes modal-in {
  from { opacity: 0; transform: translateY(10px) scale(.97); }
  to   { opacity: 1; transform: translateY(0) scale(1); }
}
.modal-header {
  display: flex; align-items: flex-start; gap: 10px;
  padding: 22px 22px 0; justify-content: space-between;
}
.modal-title-row { display: flex; align-items: center; gap: 10px; flex: 1; min-width: 0; }
.modal-title { font-size: 1.05rem; font-weight: 700; flex: 1; }
.modal-close { color: var(--text-muted); flex-shrink: 0; }
.modal-close:hover { color: var(--text); }
.modal-body { padding: 18px 22px 24px; display: flex; flex-direction: column; gap: 16px; }
.modal-description { font-size: .9rem; color: var(--text-muted); line-height: 1.7; }
.modal-repo-link {
  display: inline-flex; align-items: center; gap: 7px;
  font-size: .82rem; color: var(--cyan);
  padding: 7px 14px; border-radius: var(--radius);
  background: rgba(34,211,238,.06); border: 1px solid rgba(34,211,238,.15);
  align-self: flex-start; transition: background .18s, border-color .18s;
}
.modal-repo-link:hover { background: rgba(34,211,238,.11); border-color: rgba(34,211,238,.28); }
.modal-validated {
  display: inline-flex; align-items: center; gap: 8px;
  padding: 10px 14px; border-radius: var(--radius);
  background: rgba(74,222,128,.07); border: 1px solid rgba(74,222,128,.18);
  color: var(--success); font-size: .88rem; font-weight: 600;
}
.modal-validated-date { color: var(--text-muted); font-weight: 400; font-size: .82rem; }
.modal-submit-form { display: flex; flex-direction: column; gap: 10px; }
.modal-input-row {
  display: flex; align-items: center; gap: 10px;
  background: rgba(255,255,255,.04); border: 1px solid rgba(255,255,255,.1);
  border-radius: var(--radius); padding: 8px 14px;
  transition: border-color .2s;
}
.modal-input-row:focus-within { border-color: rgba(139,92,246,.45); }

/* ─── Ranking ───────────────────────────────────────────────────────── */
.ranking-list, .ranking-skeleton { display: flex; flex-direction: column; gap: 10px; }
.ranking-row {
  display: flex; align-items: center; gap: 16px;
  background: rgba(255,255,255,.03);
  backdrop-filter: blur(10px);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg); padding: 14px 20px;
  transition: all .2s; position: relative; overflow: hidden;
}
.ranking-row::before {
  content: ""; position: absolute; left: 0; top: 0; bottom: 0; width: 3px;
  background: transparent; transition: background .2s; border-radius: 3px 0 0 3px;
}
.ranking-row:hover { border-color: rgba(139,92,246,.3); transform: translateX(2px); }
.ranking-row:hover::before { background: var(--accent); }
.ranking-row--podium { border-color: rgba(251,191,36,.2); }
.ranking-row--podium::before { background: linear-gradient(180deg, var(--gold), rgba(251,191,36,.3)); }
.ranking-row--podium:hover { border-color: rgba(251,191,36,.45); box-shadow: 0 4px 24px rgba(251,191,36,.1); }
.ranking-row.skeleton { height: 72px; }
.ranking-rank { width: 30px; display: flex; align-items: center; justify-content: center; flex-shrink: 0; }
.rank-number { font-size: .85rem; font-weight: 700; color: var(--text-muted); }
.ranking-avatar {
  border-radius: 50%;
  border: 2px solid rgba(139,92,246,.35);
  box-shadow: 0 0 10px rgba(139,92,246,.2);
  object-fit: cover; flex-shrink: 0;
}
.ranking-info { flex: 1; min-width: 0; }
.ranking-pseudo { font-weight: 700; font-size: .95rem; display: block; margin-bottom: 5px; }
.ranking-flags { display: flex; flex-wrap: wrap; gap: 4px; }
.flag-pill {
  display: inline-flex; align-items: center; gap: 2px;
  padding: 2px 9px; border-radius: 20px; font-size: .7rem;
  background: rgba(139,92,246,.1); border: 1px solid rgba(139,92,246,.2);
  color: #a78bfa; white-space: nowrap;
}
.flag-pill--more { color: var(--cyan); border-color: rgba(34,211,238,.25); background: rgba(34,211,238,.07); }
.ranking-score {
  display: flex; align-items: center; gap: 5px;
  font-size: 1.05rem; font-weight: 800; color: var(--gold);
  text-shadow: 0 0 16px rgba(251,191,36,.4);
  flex-shrink: 0; min-width: 64px; justify-content: flex-end;
}

/* ─── Empty state ───────────────────────────────────────────────────── */
.empty-state {
  display: flex; flex-direction: column; align-items: center;
  gap: 12px; padding: 72px 20px; color: var(--text-muted); font-size: .9rem;
}

/* ─── Timeline ──────────────────────────────────────────────────────── */
.timeline {
  display: flex; flex-direction: column; gap: 0;
  position: relative; padding-left: 28px;
}
.timeline::before {
  content: ""; position: absolute; left: 9px; top: 8px; bottom: 8px;
  width: 1px;
  background: linear-gradient(180deg, rgba(139,92,246,.6), rgba(236,72,153,.4), rgba(34,211,238,.3));
}
.timeline-skeleton { display: flex; flex-direction: column; gap: 10px; }
.timeline-item { position: relative; padding: 0 0 20px 22px; }
.timeline-item.skeleton { height: 80px; border-radius: var(--radius); }
.timeline-dot {
  position: absolute; left: -22px; top: 5px;
  width: 10px; height: 10px; border-radius: 50%;
  background: var(--accent);
  box-shadow: 0 0 10px rgba(139,92,246,.7);
  border: 2px solid var(--bg);
}
.timeline-content {
  background: rgba(255,255,255,.03);
  backdrop-filter: blur(10px);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg); padding: 14px 18px;
  transition: border-color .2s;
}
.timeline-content:hover { border-color: rgba(139,92,246,.3); }
.timeline-header { display: flex; align-items: center; gap: 8px; flex-wrap: wrap; }
.timeline-avatar { border-radius: 50%; border: 1px solid rgba(139,92,246,.3); object-fit: cover; flex-shrink: 0; }
.timeline-pseudo { font-weight: 700; font-size: .9rem; }
.timeline-flag {
  padding: 2px 9px; border-radius: 20px;
  background: rgba(139,92,246,.12); color: #a78bfa;
  font-size: .77rem; border: 1px solid rgba(139,92,246,.25);
}
.timeline-points { display: inline-flex; align-items: center; gap: 3px; font-size: .78rem; font-weight: 700; color: var(--success); }
.timeline-date { display: inline-flex; align-items: center; gap: 4px; font-size: .72rem; color: var(--text-muted); margin-left: auto; }
.snapshot {
  display: flex; align-items: center; gap: 8px;
  margin-top: 10px; padding-top: 10px;
  border-top: 1px solid rgba(255,255,255,.06); flex-wrap: wrap;
}
.snapshot-label { font-size: .72rem; color: var(--text-muted); }
.snapshot-list { display: flex; gap: 8px; flex-wrap: wrap; }
.snapshot-entry {
  font-size: .72rem; color: var(--text-muted);
  background: rgba(255,255,255,.05); padding: 2px 9px;
  border-radius: 20px; border: 1px solid rgba(255,255,255,.08);
}

/* ─── Responsive ────────────────────────────────────────────────────── */
@media (max-width: 600px) {
  .navbar { padding: 0 14px; gap: 12px; }
  .navbar-brand span { display: none; }
  .user-pseudo { display: none; }
  .app-main { padding: 24px 14px 56px; }
  .flags-grid { grid-template-columns: 1fr; }
}
